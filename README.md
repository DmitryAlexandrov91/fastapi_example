# QRKot
**QRKot** финальный проект 23 спринта курса Яндекс Python разработчик расширенный.
Задача проекта - освоить фреймворк FastAPI. В результате работы было написано api-прилжожение с логикой инвестирования благотворительных проектов.

## Функции приложения

- Регистрация, аутентифицация и авторизация пользователей
- Создание благотворительных проектов (для суперпользователя)
- Создание пожертвований (для зарегистрированных пользователей)
- Автоматическое распределение свободных средств из пожертвований в благотворительные проекты
- Создание отчёта по закрытым проектам в Google Sheets (для суперпользователя)

## Стек технологий

### Backend

- Python(FastAPI, SQLAlchemy, Alembic)


### Инструменты разработки
- Git (система контроля версий)

## Развертывание проекта

1. Клонируйте репозиторий:

   **git clone https://github.com/DmitryAlexandrov91/cat_charity_fund.git**

2. Разверните виртуальное окружение и установите зависимости из файла requiremetns.txt *(проект разработан на версии Python 3.19)*

3. Создайте файл .env с необходимыми для работы приложения переменными окружения.

- APP_TITLE=Благотворительный фонд поддержки котиков QRKot
- DATABASE_URL=sqlite+aiosqlite:///./fastapi.db   (вместо fastapi можно выбрать любое название БД)
- SECRET=секретное слово для генерации ключей авторизации
- FIRST_SUPERUSER_EMAIL=почта суперюзера
- FIRST_SUPERUSER_PASSWORD=пароль суперпасуперюзерароль

Для создания отчётов в google таблицах создайте необходимые переменные окружения с учётными данными проекта google cloud
- TYPE=...
- PROJECT_ID=...
- PRIVATE_KEY_ID=...
- PRIVATE_KEY=ваш приватный ключ(с символами переноса строки \n)
- CLIENT_EMAIL=...
- CLIENT_ID=...
- AUTH_URI=...
- TOKEN_URI=...
- AUTH_PROVIDER_X509_CERT_URL=...
- CLIENT_X509_CERT_URL=...
- UNIVERSE_DOMAIN=...

И переменную с почтой пользователя, которому будет предоставлен доступ к google таблице

- EMAIL=...

4. Для создания чистой базы данных удалите или переместите существующий файл с бд. В корневой директории в папке alembic/versions удалите файлы миграций.
Далее командой **alembic revision --autogenerate -m "ваш комментарий"** создайте файл миграций.
Командой **alembic upgrade head** примените миграции. В корневой директории проекта появится файл с чистой базой данных

5. Запустите приложение командой **uvicorn app.main:app** 
В базе данных автоматически создаться пользователь с правами суперпользователя с данными, переданными в полях FIRST_SUPERUSER_EMAIL и FIRST_SUPERUSER_PASSWORD в файле .env

6. Проект доступен по адресу *http://127.0.0.1:8000*  

Документация по всем доступным эндпоинтам -  *http://127.0.0.1:8000/docs*  


## Автор

Александров Дмитрий

<u>GitHub</u>
 - https://github.com/DmitryAlexandrov91


